package mycalculator.function;

import mycalculator.utility.Register;

public class OperatorAction {

	public Register register;

	public OperatorAction(Register register, int status){

		double a, b;
		final int ERROR = 404;

		register.remainder = 0;
		if(register.regA.isEmpty()){
			a = 0;
		}else{
			a = Double.parseDouble(register.regA);
		}
		if(register.isZero == true){
			b = 0;
		}else{
			b = Double.parseDouble(register.regB);
		}

		switch(register.operationMode){
		case 0:	a = b;
				break;

		case 1:	a += b;
				break;

		case 2:	a -= b;
				break;

		case 3:	a *= b;
				break;

		case 4:	try{
					a /= b;
				}catch(Exception e){	//ゼロ分はcatchしない。 ==> a == infinity
					a = ERROR;
				}
				break;

		case 5:	try{
					register.remainder = a % b;
					a = (int) (a / b);
					register.remainderInfo = " あまり " + String.valueOf(register.remainder);
				}catch(Exception e){
					a =ERROR;
				}
				break;
		}

		switch(status){
		case 0:	register.operatorSymbol = "";
				break;

		case 1:	register.operatorSymbol = " ＋ ";
				break;

		case 2:	register.operatorSymbol = " － ";
				break;

		case 3:	register.operatorSymbol = " × ";
				break;

		case 4:	register.operatorSymbol = " ÷ ";
				break;

		case 5:	register.operatorSymbol = " ％ ";
				break;
		}

		if(status != 5 || a == ERROR){
			register.remainderInfo = "";
			register.remainder = 0;
		}

		register.regA = String.valueOf(a);
		register.regB = "";
		register.isZero = true;
		register.dotUsed = false;

		this.register = register;
	}

}
