package windowapp;

import java.awt.*;
import java.awt.event.*;

public class WindowTest extends Frame implements ActionListener, WindowListener {

	Label label;
	Button btns[] = new Button[16];
	Panel pnl;
	String btnLabels[] ={
			"7","8","9","[＋]",
			"4","5","6","[－]",
			"1","2","3","[×]",
			"0",".","INS","[÷]"
	};
	String regA,regB;

	WindowTest(){
		regA = "";
		regB = "";
		GridBagLayout gridbag = new GridBagLayout();
		GridBagConstraints c = new GridBagConstraints();
		
		addWindowListener(this);
		setSize(240,240);
		setLayout(gridbag);

		label = new Label(regB);
		c.fill = GridBagConstraints.BOTH;
		c.gridx = 0;
		c.gridy = 0;
		c.gridwidth = 4;
		c.gridheight = 1;
		add(label);
		
		c.gridwidth = 1;
		c.gridheight = 1;
		for(int i=0;i<16;i++){
			btns[i] = new Button(btnLabels[i]);
			btns[i].addActionListener(this);
			c.gridx = i % 4;
			c.gridy = (i/4) + 1;
			gridbag.setConstraints(btns[i], c);
			add(btns[i]);
		}

		setVisible(true);

	}

	@Override
	public void actionPerformed(ActionEvent e) {
		Button btn = (Button)e.getSource();
		String lbl = btn.getLabel();
				double a,b,c = 0;

				if(lbl.length()==1)
					regB+=lbl;
				else if(lbl.equals("INS")){
					regA = regB;
					regB = "";
				}else try{
					a = Double.parseDouble(regA);
					b = Double.parseDouble(regB);

					if(lbl.equals("[+]")) c = a + b;
					if(lbl.equals("[-]")) c = a - b;
					if(lbl.equals("[*]")) c = a * b;
					if(lbl.equals("[/]")) c = a / b;

					regB = String.valueOf(c);

				}catch(Exception err){
					regB = "Error";
				}

				label.setText(regB);
				System.out.println(regA);
	}

	@Override
	public void windowOpened(WindowEvent e) {
		System.out.println("Opened");
	}

	@Override
	public void windowClosing(WindowEvent e) {
		System.out.println("Closing");
		System.exit(0);
	}

	@Override
	public void windowClosed(WindowEvent e) {
		System.out.println("Closed");
	}

	@Override
	public void windowIconified(WindowEvent e) {
		System.out.println("Iconified");
	}

	@Override
	public void windowDeiconified(WindowEvent e) {
		System.out.println("Deiconified");
	}

	@Override
	public void windowActivated(WindowEvent e) {
		System.out.println("Activated");
	}

	@Override
	public void windowDeactivated(WindowEvent e) {
		System.out.println("Deactivated");
	}

}
